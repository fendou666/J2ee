package com.study.mvc.tools;

import java.io.IOException;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.util.HashMap;
import java.util.Properties;

import com.study.mvc.model.javabean.StudentInfo;

public class DBUtil {
	private static String driver;
	private static String url;
	private static String user;
	private static String pwd;
	private static Connection conn;
	
	// 关于conn应该在static中初始化还是
	static{
		getDBPropertiesInfo();
		try {
			Class.forName(driver);
			getConn();
		} catch (ClassNotFoundException e) {
			e.printStackTrace();
		}
	}
	private DBUtil(){
		
	}
	private static void getDBPropertiesInfo(){
		Properties pro = new Properties();
		try {
			pro.load(DBUtil.class.getResourceAsStream("oracleInfo.properties"));
			driver = pro.getProperty("driver", "oracle.jdbc.OracleDriver");
			url = pro.getProperty("url", "jdbc:oracle:thin:@175.3.13.254:1521:orcl");
			user = pro.getProperty("user", "scott");
			pwd = pro.getProperty("pwd", "tiger");
			if(driver==null){
				System.out.println("获取驱动失败");
			}
		} catch (IOException e) {
			e.printStackTrace();
		}
	}
	private static Connection getConn(){
		try {
			conn = DriverManager.getConnection(url, user, pwd);
		} catch (SQLException e) {
			e.printStackTrace();
		}
		return conn;
	}
	private static HashMap checkStudentInfo(){
		HashMap mp = null;
		StudentInfo sti = null;
		String sql = "SELECT ";
		conn.prepareStatement(sql);
		
		
		
		return mp;
	}
	
	
}
